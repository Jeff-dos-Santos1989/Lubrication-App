<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lubricant Consumption</title>

  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="assets/css/styles.css" />

  <style>
    /* ADDED: Utility class to hide/show elements */
    .hidden { 
      display: none !important; 
    }

    .page{ 
      max-width: 1060px 
    }

    header{ 
      display:grid; 
      grid-template-columns:160px 1fr; 
      gap:16px; 
      align-items:center; 
      margin-bottom:8px; 
    }

    header img{ 
      max-width:160px; 
      height:auto 
    }

    .hdr-note{ 
      text-align:right; 
      font-size:12px; 
      color:var(--muted) 
    }

    .title{ 
      font-size:22px; 
      font-weight:700; 
      margin:8px 0 16px 
    }

    .divider{ 
      border-top:2px solid var(--line); 
      margin:16px 0 24px 
    }

    .card{ 
      background:#fff; 
      border:1px solid var(--line); 
      border-radius:12px; 
      padding:16px 18px; 
    }

    .grid-2{ 
      display:grid; 
      grid-template-columns:1fr 1fr; 
      gap:12px 
    }
    .grid-3{ 
      display:grid; 
      grid-template-columns:1fr 1fr 1fr; 
      gap:12px 
    }

    .row{ 
      display:grid; 
      grid-template-columns:160px 1fr; 
      gap:10px; 
      align-items:center 
    }

    .lbl{ 
      color:var(--brand); font-weight:700 
    }

    .hint{ 
      font-size:12px; color:var(--muted) 
    }

    .actions{ 
      display:flex; 
      gap:12px; 
      justify-content:flex-end; 
      margin-top:16px 
    }

    .btn{ 
      border:none; 
      padding:10px 16px; 
      border-radius:10px; 
      cursor:pointer; 
      font-weight:700; 
      color:#fff; 
      background:var(--brand) 
    }

    .btnAddRecor{
      margin-top: 100px;
    }

    .btn-secondary{ 
      background:#444 
    }

    .btn-ghost{ 
      background:#999 
    }

    .chart-wrap{ 
      height: 380px; 
      margin-top: 8px 
    }

    table{ 
      width:100%; 
      border-collapse:collapse; 
      background:#fff; 
      border:1px solid var(--line); 
      border-radius:12px; 
      overflow:hidden 
    }

    th,td{ 
      padding:10px 12px; 
      border-top:1px solid var(--line); 
      font-size:14px; 
    }

    th{ 
      text-align:left; 
      color:var(--brand) 
    }

    @media (max-width: 720px){
      .row{ 
        grid-template-columns:1fr 
      }

      header{ 
        grid-template-columns:1fr; gap:8px 
      }

      .hdr-note{ 
        text-align:left 
      }

      .grid-2, .grid-3{ 
        grid-template-columns:1fr 
      }

      .chart-wrap{ 
        height: 320px 
      }
    }

  </style>
</head>
<body>

  <div class="page">
    <header>
      <img src="Images/Logo_ArcelorMittal.png" alt="ArcelorMittal">
      <div class="hdr-note">
        Consult the electronic version for the current information: printed â€“ <span id="printedAt"></span>
      </div>
    </header>

    <div class="title">Lubricant Consumption Dashboard</div>
    <div class="divider"></div>

    <div class="title" style="font-size: 20px; color: var(--brand);">Grease Consumption (g)</div>

    <section class="card">
      <div class="grid-3">
        <div class="row">
          <div class="lbl">Period</div>
          <div>
            <select id="grease_cons_period" class="ac-input" style="border-width:1px">
              <option value="month" selected>Monthly</option>
              <option value="year">Yearly</option>
              <option value="5y">5-Year Buckets</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="lbl">Group By</div>
          <div>
            <select id="grease_cons_groupby" class="ac-input" style="border-width:1px">
              <option value="total" selected>Total</option>
              <option value="lubricantType">Lubricant Type</option>
              <option value="assetId">Asset ID</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="lbl">Actions</div>
          <div class="actions" style="justify-content:flex-start">
            <button id="grease_btnExportCsv" class="btn">Export to CSV</button>
            </div>
        </div>
      </div>
      <div class="chart-wrap">
        <canvas id="grease_cons_chart" aria-label="Grease consumption chart"></canvas>
      </div>
    </section>

    <div class="divider" style="margin:16px 0"></div>

    <section class="card">
      <h3 style="margin:0 0 12px">Grease Filters</h3>
      <div class="grid-3">
        <div>
          <label class="hint">Assigned WO#</label>
          <input id="grease_f_wo" type="text" class="ac-input" placeholder="e.g., TIN-123456" style="border-width:1px">
        </div>
        <div>
          <label class="hint">Equipment / Asset ID</label>
          <select id="grease_f_asset" class="ac-input" style="border-width:1px">
            </select>
        </div>
        <div>
          <label class="hint">Lubricant Type</label>
          <select id="grease_f_type" class="ac-input" style="border-width:1px">
            </select>
        </div>
        <div>
          <label class="hint">From (date)</label>
          <input id="grease_f_from" type="date" class="ac-input" style="border-width:1px">
        </div>
        <div>
          <label class="hint">To (date)</label>
          <input id="grease_f_to" type="date" class="ac-input" style="border-width:1px">
        </div>
        <div class="actions" style="align-items:end; justify-content:flex-start">
          <button id="grease_btnApplyFilters" class="btn" type="button">Apply</button>
          <button id="grease_btnClearFilters" class="btn-ghost btn" type="button">Clear</button>
        </div>
      </div>
    </section>

    <div class="divider" style="margin:16px 0"></div>

    <section class="card">
      <h3 style="margin:0 0 12px">Logged Grease Consumption</h3>
      <div style="overflow:auto">
        <table id="grease_cons_table">
          <thead>
            <tr>
              <th>Date/Time</th>
              <th>Assigned WO#</th>
              <th>Equipment / Asset ID</th>
              <th>Lubricant Type</th>
              <th style="text-align:right">Amount</th>
              <th>Unit</th>
              <th style="text-align:center">Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <div class="divider"></div>

    <div class="title" style="font-size: 20px; color: var(--brand);">Oil Consumption (L)</div>

    <section class="card">
      <div class="grid-3">
        <div class="row">
          <div class="lbl">Period</div>
          <div>
            <select id="oil_cons_period" class="ac-input" style="border-width:1px">
              <option value="month" selected>Monthly</option>
              <option value="year">Yearly</option>
              <option value="5y">5-Year Buckets</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="lbl">Group By</div>
          <div>
            <select id="oil_cons_groupby" class="ac-input" style="border-width:1px">
              <option value="total" selected>Total</option>
              <option value="lubricantType">Lubricant Type</option>
              <option value="assetId">Asset ID</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="lbl">Actions</div>
          <div class="actions" style="justify-content:flex-start">
            <button id="oil_btnExportCsv" class="btn">Export to CSV</button>
            </div>
        </div>
      </div>
      <div class="chart-wrap">
        <canvas id="oil_cons_chart" aria-label="Oil consumption chart"></canvas>
      </div>
    </section>

    <div class="divider" style="margin:16px 0"></div>

    <section class="card">
      <h3 style="margin:0 0 12px">Oil Filters</h3>
      <div class="grid-3">
        <div>
          <label class="hint">Assigned WO#</label>
          <input id="oil_f_wo" type="text" class="ac-input" placeholder="e.g., TIN-123456" style="border-width:1px">
        </div>
        <div>
          <label class="hint">Equipment / Asset ID</label>
          <select id="oil_f_asset" class="ac-input" style="border-width:1px">
            </select>
        </div>
        <div>
          <label class="hint">Lubricant Type</label>
          <select id="oil_f_type" class="ac-input" style="border-width:1px">
            </select>
        </div>
        <div>
          <label class="hint">From (date)</label>
          <input id="oil_f_from" type="date" class="ac-input" style="border-width:1px">
        </div>
        <div>
          <label class="hint">To (date)</label>
          <input id="oil_f_to" type="date" class="ac-input" style="border-width:1px">
        </div>
        <div class="actions" style="align-items:end; justify-content:flex-start">
          <button id="oil_btnApplyFilters" class="btn" type="button">Apply</button>
          <button id="oil_btnClearFilters" class="btn-ghost btn" type="button">Clear</button>
        </div>
      </div>
    </section>

    <div class="divider" style="margin:16px 0"></div>

    <section class="card">
      <h3 style="margin:0 0 12px">Logged Oil Consumption</h3>
      <div style="overflow:auto">
        <table id="oil_cons_table">
          <thead>
            <tr>
              <th>Date/Time</th>
              <th>Assigned WO#</th>
              <th>Equipment / Asset ID</th>
              <th>Lubricant Type</th>
              <th style="text-align:right">Amount</th>
              <th>Unit</th>
              <th style="text-align:center">Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <div class="divider"></div>

    <section class="card">
      <h3 style="margin:0 0 12px">Add Consumption Record</h3>
      <div class="grid-2">
        <div>
          <label class="hint">Assigned WO#</label>
          <input id="c_wo" type="text" class="ac-input" placeholder="TIN-123456" style="border-width:1px">
        </div>
        <div>
          <label class="hint">Equipment / Asset ID</label>
          <select id="c_asset" class="ac-input" style="border-width:1px">
            </select>
        </div>
        <div>
          <label class="hint">Unit</label>
          <select id="c_unit" class="ac-input" style="border-width:1px">
            <option>g</option>
            <option>L</option>
          </select>
        </div>
        <div>
          <label class="hint">Lubricant Type</label>
          <select id="c_type" class="ac-input" style="border-width:1px">
            </select>
        </div>
        <div>
          <label class="hint">Amount</label>
          <input id="c_amount" type="number" inputmode="decimal" min="0" step="0.001" class="ac-input" placeholder="0.000" style="border-width:1px">
        </div>
        <div>
          <label class="hint">Date &amp; Time</label>
          <input id="c_time" type="datetime-local" class="ac-input" style="border-width:1px">
        </div>
      </div>
      <div class="actions" style="align-items:end; justify-content:flex-start; margin-top: 24px;">
        <button id="btnAddRecord" class="btn" type="button">Add Record</button>
        <button id="btnCancelEdit" class="btn-ghost btn hidden" type="button">Cancel Edit</button>
        <button id="btnImportCsv" class="btn-ghost btn" type="button">Import CSV</button>
        <input id="imp_file" type="file" accept=".csv,text/csv" style="display:none">
      </div>
    </section>

    <div class="actions" style="margin-top:20px">
      <a class="btn-ghost btn" href="index.html">Back to Home</a>
    </div>

  </div>

  <script src="assets/js/vendor/chart.umd.min.js"></script>
  <script src="assets.js/app-core.js"></script>
  <script src="assets/js/consumption.js"></script>

  <script>
    document.getElementById('printedAt').textContent = new Date().toLocaleString();
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js', { scope: './' })
          .catch(err => console.error('SW registration failed:', err));
      });
    }
  </script>

  <script src="assets/js/vendor/chart.umd.min.js"></script>
  <script src="assets/js/vendor/html2pdf.bundle.min.js"></script>
</body>
</html>